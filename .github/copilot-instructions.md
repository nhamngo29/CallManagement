# Copilot Instructions for CallManagement

## Project Overview
This is an **Avalonia UI 11.x desktop application** (.NET 9) for managing call center contacts and tracking call statuses. The UI is Vietnamese-localized with an onboarding wizard and Excel import/export functionality.

## Architecture

### MVVM Pattern with CommunityToolkit.Mvvm
- **ViewModels** inherit from `ViewModelBase` → `ObservableObject`
- Use `[ObservableProperty]` attribute for reactive properties (generates backing fields with `_` prefix)
- Use `[RelayCommand]` attribute for commands (generates `{Name}Command` property)
- Example from [MainWindowViewModel.cs](CallManagement/ViewModels/MainWindowViewModel.cs):
  ```csharp
  [ObservableProperty]
  private ObservableCollection<Contact> _contacts = new();
  
  [RelayCommand]
  private void SetAnswered(Contact? contact) { ... }
  ```

### View-ViewModel Convention
- Views in `Views/` folder, ViewModels in `ViewModels/` folder
- `ViewLocator` resolves views by replacing "ViewModel" with "View" in type name
- AXAML files use `x:DataType` for compiled bindings (enabled by default in `.csproj`)

### Styling System (Styles/ folder)
- **Colors.axaml**: Design tokens as `<Color>` and `<SolidColorBrush>` resources
- **Controls.axaml**: Button styles using CSS-like selectors (`Button.primary`, `Button.secondary`)
- **Typography.axaml**: Text styles
- **Animations.axaml**: Reusable transitions
- Reference in AXAML: `{StaticResource PrimaryBrush}`, `Classes="primary"`

## Key Patterns

### Models
- Models in `Models/` inherit from `ObservableObject` when they need property change notifications
- `CallStatus` enum defines: `None`, `Answered`, `NoAnswer`, `InvalidNumber`, `Busy`

### Converters (Converters/Converters.cs)
- All converters in single file, implement `IValueConverter`
- Include singleton `Instance` for reuse: `public static readonly XConverter Instance = new();`
- Status-to-UI converters: `CallStatusToStringConverter`, `CallStatusToBackgroundConverter`, `CallStatusToForegroundConverter`

### AXAML Namespace Aliases
```xml
xmlns:vm="using:TEST.ViewModels"
xmlns:models="using:TEST.Models"
xmlns:conv="using:TEST.Converters"
```

## Build & Run
```powershell
cd CallManagement
dotnet build
dotnet run
```

## Code Conventions

### Naming
- Private fields: `_camelCase` (auto-generated by `[ObservableProperty]`)
- Properties: `PascalCase`
- Commands: Method name + `Command` suffix (e.g., `ImportExcel` → `ImportExcelCommand`)

### Section Comments
Use decorative separators in ViewModels for organization:
```csharp
// ═══════════════════════════════════════════════════════════════════════
// OBSERVABLE PROPERTIES
// ═══════════════════════════════════════════════════════════════════════
```

### Localization-Ready Strings
UI strings are hardcoded in Vietnamese but structured for future localization:
- Button labels in AXAML
- Status display text in converters
- Onboarding content as ViewModel properties

## Important Files
- [App.axaml](CallManagement/App.axaml): Style includes, theme configuration (Light mode default)
- [MainWindow.axaml](CallManagement/Views/MainWindow.axaml): Main UI layout with DataGrid, sidebar stats, onboarding overlay
- [MainWindowViewModel.cs](CallManagement/ViewModels/MainWindowViewModel.cs): Core logic, commands, statistics
- [Colors.axaml](CallManagement/Styles/Colors.axaml): Full color palette with semantic naming

## TODO Items (marked in code)
- Excel import/export implementation
- Persist `IsFirstLaunch` setting for onboarding

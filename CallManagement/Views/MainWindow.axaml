<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:CallManagement.ViewModels"
        xmlns:models="using:CallManagement.Models"
        xmlns:conv="using:CallManagement.Converters"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="1200" d:DesignHeight="800"
        x:Class="CallManagement.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="Call Manager"
        MinWidth="900"
        MinHeight="600"
        Background="{StaticResource AppBackgroundBrush}">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- CONVERTERS -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <Window.Resources>
        <conv:CallStatusToStringConverter x:Key="StatusToString"/>
        <conv:CallStatusToBackgroundConverter x:Key="StatusToBackground"/>
        <conv:CallStatusToForegroundConverter x:Key="StatusToForeground"/>
        <conv:StepToVisibilityConverter x:Key="StepToVisibility"/>
        <conv:InverseBoolConverter x:Key="InverseBool"/>
        <conv:StepIndicatorBrushConverter x:Key="StepIndicatorBrush"/>
        <conv:StringHasContentConverter x:Key="StringHasContent"/>
        <conv:StringToPlaceholderVisibilityConverter x:Key="StringToPlaceholder"/>
        <conv:BoolToFontWeightConverter x:Key="BoolToFontWeightConverter"/>
        <conv:BoolToBrushConverter x:Key="BoolToBrushConverter"/>
    </Window.Resources>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- MAIN LAYOUT -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <Grid RowDefinitions="Auto,*">
        
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <!-- TOP BAR -->
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <Border Grid.Row="0"
                Background="{StaticResource TopBarBackgroundBrush}"
                BorderBrush="{StaticResource BorderLightBrush}"
                BorderThickness="0,0,0,1"
                Padding="20,12">
            <Grid ColumnDefinitions="Auto,*,Auto">
                
                <!-- Logo + App Name -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="12" VerticalAlignment="Center">
                    <!-- App Icon -->
                    <Border Width="36" Height="36" CornerRadius="8" Background="{StaticResource PrimaryBrush}">
                        <TextBlock Text="ðŸ“ž" FontSize="18" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>
                    <TextBlock Classes="appTitle" Text="Call Manager" VerticalAlignment="Center"/>
                </StackPanel>
                
                <!-- Action Buttons -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="8">
                    
                    <!-- Import Button -->
                    <Button Classes="topBarButton" 
                            x:Name="ImportButton"
                            Command="{Binding ImportExcelCommand}"
                            ToolTip.Tip="Import file Excel chá»©a danh sÃ¡ch gá»i (âŒ˜I / Ctrl+I)">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="ðŸ“¥" FontSize="16"/>
                            <TextBlock Text="Import Excel" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                    
                    <!-- Export Button -->
                    <Button Classes="topBarButton"
                            x:Name="ExportButton"
                            Command="{Binding ExportExcelCommand}"
                            ToolTip.Tip="Xuáº¥t káº¿t quáº£ cuá»™c gá»i ra file Excel (âŒ˜E / Ctrl+E)">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="ðŸ“¤" FontSize="16"/>
                            <TextBlock Text="Export Excel" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                    
                    <!-- Separator -->
                    <Border Width="1" Height="24" Background="{StaticResource BorderLightBrush}" Margin="8,0"/>
                    
                    <!-- Save Session Button -->
                    <Button Classes="topBarButton primary"
                            Command="{Binding SaveSessionCommand}"
                            IsEnabled="{Binding IsCurrentTabEditable}"
                            ToolTip.Tip="LÆ°u phiÃªn hiá»‡n táº¡i vÃ o database (âŒ˜S / Ctrl+S)">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="ðŸ’¾" FontSize="16"/>
                            <TextBlock Text="Save Session" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                    
                    <!-- Clear Session Button -->
                    <Button Classes="topBarButton"
                            Command="{Binding ClearCurrentSessionCommand}"
                            IsEnabled="{Binding IsCurrentTabEditable}"
                            ToolTip.Tip="XÃ³a dá»¯ liá»‡u phiÃªn hiá»‡n táº¡i">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="ðŸ—‘ï¸" FontSize="16"/>
                            <TextBlock Text="Clear" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                    
                    <!-- Separator -->
                    <Border Width="1" Height="24" Background="{StaticResource BorderLightBrush}" Margin="8,0"/>
                    
                    <!-- Help Button -->
                    <Button Classes="iconButton"
                            Command="{Binding ShowHelpCommand}"
                            ToolTip.Tip="Xem hÆ°á»›ng dáº«n sá»­ dá»¥ng">
                        <TextBlock Text="â“" FontSize="16" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <!-- LOADING OVERLAY -->
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <Border Grid.Row="0" Grid.RowSpan="2"
                IsVisible="{Binding IsLoading}"
                Background="{StaticResource OverlayBackgroundBrush}"
                ZIndex="100">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Spacing="12">
                <TextBlock Text="â³" FontSize="48" HorizontalAlignment="Center"/>
                <TextBlock Text="{Binding StatusMessage}" 
                           Classes="bodySecondary"
                           HorizontalAlignment="Center"/>
            </StackPanel>
        </Border>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <!-- MAIN CONTENT AREA WITH TABCONTROL -->
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <Grid Grid.Row="1" ColumnDefinitions="240,*">
            
            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <!-- SIDEBAR -->
            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <Border Grid.Column="0"
                    Background="{StaticResource SidebarBackgroundBrush}"
                    BorderBrush="{StaticResource BorderLightBrush}"
                    BorderThickness="0,0,1,0"
                    IsVisible="{Binding IsSidebarVisible}">
                <Grid RowDefinitions="Auto,*,Auto">
                    
                    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                    <!-- SIDEBAR HEADER -->
                    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                    <Border Grid.Row="0" 
                            Padding="16,12"
                            BorderBrush="{StaticResource BorderLightBrush}"
                            BorderThickness="0,0,0,1">
                        <Grid ColumnDefinitions="*,Auto">
                            <TextBlock Classes="heading3" Text="ðŸ“‚ Sessions" VerticalAlignment="Center"/>
                            <Button Grid.Column="1"
                                    Classes="iconButton"
                                    Command="{Binding RefreshSessionsCommand}"
                                    ToolTip.Tip="Refresh sessions">
                                <TextBlock Text="ðŸ”„" FontSize="14"/>
                            </Button>
                        </Grid>
                    </Border>
                    
                    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                    <!-- SESSIONS LIST -->
                    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                    <ListBox Grid.Row="1" 
                             ItemsSource="{Binding Sessions}"
                             SelectedItem="{Binding SelectedSession, Mode=TwoWay}"
                             Background="Transparent"
                             BorderThickness="0"
                             Padding="8"
                             Classes="sessionListBox">
                        <ListBox.Styles>
                            <!-- Remove default ListBox selection styling -->
                            <Style Selector="ListBoxItem">
                                <Setter Property="Padding" Value="0"/>
                                <Setter Property="Margin" Value="0,2"/>
                                <Setter Property="Background" Value="Transparent"/>
                                <Setter Property="CornerRadius" Value="8"/>
                                <Setter Property="Cursor" Value="Hand"/>
                            </Style>
                            <Style Selector="ListBoxItem:pointerover /template/ ContentPresenter">
                                <Setter Property="Background" Value="{StaticResource NeutralLightBrush}"/>
                            </Style>
                            <Style Selector="ListBoxItem:selected /template/ ContentPresenter">
                                <Setter Property="Background" Value="{StaticResource PrimaryBrush}"/>
                            </Style>
                            <Style Selector="ListBoxItem:selected:pointerover /template/ ContentPresenter">
                                <Setter Property="Background" Value="{StaticResource PrimaryHoverBrush}"/>
                            </Style>
                        </ListBox.Styles>
                        
                        <ListBox.ItemTemplate>
                            <DataTemplate x:DataType="vm:SessionListItemViewModel">
                                <Grid ColumnDefinitions="Auto,*,Auto" Margin="12,10">
                                    <!-- Icon -->
                                    <TextBlock Grid.Column="0" 
                                               Text="{Binding Icon}" 
                                               FontSize="14"
                                               VerticalAlignment="Center"
                                               Margin="0,0,10,0"/>
                                    
                                    <!-- Session Name/Time -->
                                    <TextBlock Grid.Column="1"
                                               Text="{Binding DisplayTime}"
                                               Classes="body"
                                               VerticalAlignment="Center"
                                               TextTrimming="CharacterEllipsis"
                                               FontWeight="{Binding IsCurrent, Converter={StaticResource BoolToFontWeightConverter}}"/>
                                    
                                    <!-- Contact Count Badge -->
                                    <Border Grid.Column="2"
                                            IsVisible="{Binding !IsCurrent}"
                                            Background="{StaticResource NeutralLightBrush}"
                                            CornerRadius="10"
                                            Padding="6,2"
                                            VerticalAlignment="Center">
                                        <TextBlock Text="{Binding ContactCount}"
                                                   FontSize="11"
                                                   Foreground="{StaticResource TextMutedBrush}"/>
                                    </Border>
                                </Grid>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                    
                    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                    <!-- STATISTICS PANEL (Bottom) -->
                    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                    <Border Grid.Row="2"
                            BorderBrush="{StaticResource BorderLightBrush}"
                            BorderThickness="0,1,0,0"
                            Padding="12">
                        <StackPanel Spacing="8">
                            <TextBlock Classes="caption" Text="ðŸ“Š Statistics" FontWeight="SemiBold"/>
                            
                            <Grid ColumnDefinitions="*,Auto" RowDefinitions="Auto,Auto,Auto,Auto,Auto" Margin="0,4,0,0">
                                <!-- Total -->
                                <TextBlock Grid.Row="0" Grid.Column="0" Classes="caption" Text="Total" Foreground="{StaticResource TextMutedBrush}"/>
                                <TextBlock Grid.Row="0" Grid.Column="1" Classes="body" Text="{Binding TotalCount}" FontWeight="SemiBold"/>
                                
                                <!-- Answered -->
                                <StackPanel Grid.Row="1" Grid.Column="0" Orientation="Horizontal" Spacing="6" Margin="0,4,0,0">
                                    <Border Width="8" Height="8" CornerRadius="4" Background="{StaticResource SuccessBrush}" VerticalAlignment="Center"/>
                                    <TextBlock Classes="caption" Text="Nghe mÃ¡y" Foreground="{StaticResource TextMutedBrush}"/>
                                </StackPanel>
                                <TextBlock Grid.Row="1" Grid.Column="1" Classes="body" Text="{Binding AnsweredCount}" Foreground="{StaticResource SuccessTextBrush}" Margin="0,4,0,0"/>
                                
                                <!-- No Answer -->
                                <StackPanel Grid.Row="2" Grid.Column="0" Orientation="Horizontal" Spacing="6" Margin="0,4,0,0">
                                    <Border Width="8" Height="8" CornerRadius="4" Background="{StaticResource NeutralBrush}" VerticalAlignment="Center"/>
                                    <TextBlock Classes="caption" Text="KhÃ´ng nghe" Foreground="{StaticResource TextMutedBrush}"/>
                                </StackPanel>
                                <TextBlock Grid.Row="2" Grid.Column="1" Classes="body" Text="{Binding NoAnswerCount}" Foreground="{StaticResource NeutralTextBrush}" Margin="0,4,0,0"/>
                                
                                <!-- Invalid -->
                                <StackPanel Grid.Row="3" Grid.Column="0" Orientation="Horizontal" Spacing="6" Margin="0,4,0,0">
                                    <Border Width="8" Height="8" CornerRadius="4" Background="{StaticResource ErrorBrush}" VerticalAlignment="Center"/>
                                    <TextBlock Classes="caption" Text="Sá»‘ sai" Foreground="{StaticResource TextMutedBrush}"/>
                                </StackPanel>
                                <TextBlock Grid.Row="3" Grid.Column="1" Classes="body" Text="{Binding InvalidCount}" Foreground="{StaticResource ErrorTextBrush}" Margin="0,4,0,0"/>
                                
                                <!-- Busy -->
                                <StackPanel Grid.Row="4" Grid.Column="0" Orientation="Horizontal" Spacing="6" Margin="0,4,0,0">
                                    <Border Width="8" Height="8" CornerRadius="4" Background="{StaticResource WarningBrush}" VerticalAlignment="Center"/>
                                    <TextBlock Classes="caption" Text="MÃ¡y báº­n" Foreground="{StaticResource TextMutedBrush}"/>
                                </StackPanel>
                                <TextBlock Grid.Row="4" Grid.Column="1" Classes="body" Text="{Binding BusyCount}" Foreground="{StaticResource WarningTextBrush}" Margin="0,4,0,0"/>
                            </Grid>
                        </StackPanel>
                    </Border>
                </Grid>
            </Border>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <!-- DATA GRID AREA WITH TABCONTROL -->
            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <Border Grid.Column="1" Padding="20" Classes="fadeIn">
                <Grid RowDefinitions="Auto,*">
                    
                    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                    <!-- TAB HEADERS -->
                    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                    <TabControl Grid.Row="0" 
                                Grid.RowSpan="2"
                                ItemsSource="{Binding Tabs}"
                                SelectedItem="{Binding SelectedTab}"
                                TabStripPlacement="Top"
                                Classes="sessionTabs">
                        
                        <!-- Tab Header Template -->
                        <TabControl.ItemTemplate>
                            <DataTemplate x:DataType="vm:SessionTabViewModel">
                                <Grid ColumnDefinitions="Auto,Auto,Auto" Margin="4,2">
                                    <!-- Tab Title -->
                                    <TextBlock Grid.Column="0"
                                               Text="{Binding Title}"
                                               VerticalAlignment="Center"
                                               FontWeight="{Binding IsCurrentSession, Converter={StaticResource BoolToFontWeightConverter}}"
                                               Foreground="{Binding IsCurrentSession, Converter={StaticResource BoolToBrushConverter}}"/>
                                    
                                    <!-- Contact Count Badge -->
                                    <Border Grid.Column="1"
                                            Background="{StaticResource NeutralLightBrush}"
                                            CornerRadius="8"
                                            Padding="6,2"
                                            Margin="8,0,0,0"
                                            VerticalAlignment="Center">
                                        <TextBlock Text="{Binding Contacts.Count}"
                                                   FontSize="10"
                                                   Foreground="{StaticResource TextSecondaryBrush}"/>
                                    </Border>
                                    
                                    <!-- Close Button (only for history tabs) -->
                                    <Button Grid.Column="2"
                                            Classes="iconButton"
                                            Width="20" Height="20"
                                            Margin="8,0,0,0"
                                            IsVisible="{Binding IsCurrentSession, Converter={StaticResource InverseBool}}"
                                            Command="{Binding $parent[TabControl].((vm:MainWindowViewModel)DataContext).CloseTabCommand}"
                                            CommandParameter="{Binding}"
                                            ToolTip.Tip="ÄÃ³ng tab (dá»¯ liá»‡u váº«n Ä‘Æ°á»£c lÆ°u)">
                                        <TextBlock Text="âœ•" FontSize="10" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Button>
                                </Grid>
                            </DataTemplate>
                        </TabControl.ItemTemplate>
                        
                        <!-- Tab Content Template -->
                        <TabControl.ContentTemplate>
                            <DataTemplate x:DataType="vm:SessionTabViewModel">
                                <Border Classes="card" Padding="0" ClipToBounds="True" Margin="0,12,0,0">
                                    <Grid RowDefinitions="Auto,Auto,*">
                                        
                                        <!-- Session Info Bar (for history tabs) -->
                                        <Border Grid.Row="0"
                                                IsVisible="{Binding IsCurrentSession, Converter={StaticResource InverseBool}}"
                                                Background="{StaticResource WarningLightBrush}"
                                                Padding="12,8"
                                                BorderBrush="{StaticResource BorderLightBrush}"
                                                BorderThickness="0,0,0,1">
                                            <Grid ColumnDefinitions="*,Auto">
                                                <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="8">
                                                    <TextBlock Text="ðŸ“…" FontSize="14" VerticalAlignment="Center"/>
                                                    <TextBlock Text="PhiÃªn Ä‘Ã£ lÆ°u:" FontWeight="SemiBold" VerticalAlignment="Center"/>
                                                    <TextBlock Text="{Binding SessionKey}" 
                                                               FontFamily="Consolas, Menlo, monospace"
                                                               VerticalAlignment="Center"/>
                                                    <TextBlock Text="â€¢" VerticalAlignment="Center" Margin="8,0"/>
                                                    <TextBlock Text="Chá»‰ xem (Read-only)" 
                                                               FontStyle="Italic"
                                                               Foreground="{StaticResource TextMutedBrush}"
                                                               VerticalAlignment="Center"/>
                                                </StackPanel>
                                                
                                                <!-- Delete Session Button -->
                                                <Button Grid.Column="1"
                                                        Classes="iconButton error"
                                                        Width="28" Height="28"
                                                        Command="{Binding $parent[TabControl].((vm:MainWindowViewModel)DataContext).RequestDeleteSessionCommand}"
                                                        CommandParameter="{Binding}"
                                                        ToolTip.Tip="XÃ³a phiÃªn nÃ y khá»i database">
                                                    <TextBlock Text="ðŸ—‘ï¸" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Button>
                                            </Grid>
                                        </Border>
                        
                                        <!-- Table Header -->
                                        <Border Grid.Row="1" 
                                                Background="{StaticResource NeutralLightBrush}" 
                                                Padding="16,12"
                                                BorderBrush="{StaticResource BorderLightBrush}"
                                                BorderThickness="0,0,0,1">
                                            <Grid ColumnDefinitions="50,*,140,140,100,140,140,50">
                                                <TextBlock Grid.Column="0" Classes="caption" FontWeight="SemiBold" Text="#"/>
                                                <TextBlock Grid.Column="1" Classes="caption" FontWeight="SemiBold" Text="TÃªn"/>
                                                <TextBlock Grid.Column="2" Classes="caption" FontWeight="SemiBold" Text="Sá»‘ Ä‘iá»‡n thoáº¡i"/>
                                                <TextBlock Grid.Column="3" Classes="caption" FontWeight="SemiBold" Text="CÃ´ng ty"/>
                                                <TextBlock Grid.Column="4" Classes="caption" FontWeight="SemiBold" Text="Ghi chÃº"/>
                                                <TextBlock Grid.Column="5" Classes="caption" FontWeight="SemiBold" Text="Tráº¡ng thÃ¡i"/>
                                                <TextBlock Grid.Column="6" Classes="caption" FontWeight="SemiBold" Text="HÃ nh Ä‘á»™ng" HorizontalAlignment="Center"/>
                                                <TextBlock Grid.Column="7" Classes="caption" FontWeight="SemiBold" Text="" ToolTip.Tip="Double-click Ä‘á»ƒ chá»‰nh sá»­a"/>
                                            </Grid>
                                        </Border>
                        
                                        <!-- Table Content -->
                                        <ScrollViewer Grid.Row="2" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                                            <ItemsControl ItemsSource="{Binding Contacts}" x:Name="ContactsGrid">
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate x:DataType="models:Contact">
                                                        <!-- Main Row Container -->
                                                        <Border x:Name="RowContainer">
                                                            <StackPanel>
                                                                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                                                                <!-- NORMAL VIEW MODE -->
                                                                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                                                                <Border x:Name="RowBorder"
                                                                        Classes="contactRow"
                                                                        IsVisible="{Binding IsEditing, Converter={StaticResource InverseBool}}"
                                                                        DoubleTapped="OnRowDoubleTapped"
                                                                        ToolTip.Tip="Double-click Ä‘á»ƒ chá»‰nh sá»­a">
                                                    
                                                                    <Grid ColumnDefinitions="50,*,140,140,100,140,140,50" VerticalAlignment="Center">
                                                                        <!-- ID -->
                                                        <TextBlock Grid.Column="0" 
                                                                   Classes="bodySecondary" 
                                                                   Text="{Binding Id}" 
                                                                   VerticalAlignment="Center"/>
                                                        
                                                        <!-- Name -->
                                                        <TextBlock Grid.Column="1" 
                                                                   Classes="body" 
                                                                   Text="{Binding Name}" 
                                                                   VerticalAlignment="Center"
                                                                   TextTrimming="CharacterEllipsis"/>
                                                        
                                                        <!-- Phone (Monospace) with Copy Button -->
                                                        <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="4" VerticalAlignment="Center">
                                                            <TextBlock Classes="monospace" 
                                                                       Text="{Binding PhoneNumber}" 
                                                                       VerticalAlignment="Center"
                                                                       Foreground="{StaticResource TextSecondaryBrush}"/>
                                                            <Button Classes="iconButton"
                                                                    Width="24" Height="24"
                                                                    Command="{Binding $parent[Window].((vm:MainWindowViewModel)DataContext).CopyPhoneNumberCommand}"
                                                                    CommandParameter="{Binding}"
                                                                    ToolTip.Tip="Sao chÃ©p sá»‘ Ä‘iá»‡n thoáº¡i">
                                                                <TextBlock Text="ðŸ“‹" FontSize="11" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                            </Button>
                                                        </StackPanel>
                                                        
                                                        <!-- Company -->
                                                        <TextBlock Grid.Column="3" 
                                                                   Classes="bodySecondary" 
                                                                   Text="{Binding Company}" 
                                                                   VerticalAlignment="Center"
                                                                   TextTrimming="CharacterEllipsis"/>
                                                        
                                                        <!-- Note Preview Button -->
                                                        <Button Grid.Column="4"
                                                                Classes="noteButton"
                                                                Classes.hasNote="{Binding HasNote}"
                                                                Command="{Binding ToggleNoteCommand}"
                                                                VerticalAlignment="Center"
                                                                ToolTip.Tip="Click Ä‘á»ƒ thÃªm/xem ghi chÃº">
                                                            <StackPanel Orientation="Horizontal" Spacing="4">
                                                                <TextBlock Text="ðŸ“" FontSize="12" VerticalAlignment="Center"/>
                                                                <!-- No note placeholder -->
                                                                <TextBlock Text="ThÃªm..."
                                                                           FontSize="11"
                                                                           Foreground="{StaticResource TextMutedBrush}"
                                                                           VerticalAlignment="Center"
                                                                           IsVisible="{Binding HasNote, Converter={StaticResource InverseBool}}"/>
                                                                <!-- Note preview -->
                                                                <TextBlock Text="{Binding NotePreview}"
                                                                           FontSize="11"
                                                                           Foreground="{StaticResource WarningTextBrush}"
                                                                           VerticalAlignment="Center"
                                                                           MaxWidth="60"
                                                                           TextTrimming="CharacterEllipsis"
                                                                           IsVisible="{Binding HasNote}"/>
                                                            </StackPanel>
                                                        </Button>
                                                        
                                                        <!-- Status Badge -->
                                                        <Border Grid.Column="5"
                                                                CornerRadius="9999"
                                                                Padding="10,4"
                                                                HorizontalAlignment="Left"
                                                                VerticalAlignment="Center"
                                                                Background="{Binding Status, Converter={StaticResource StatusToBackground}}">
                                                            <TextBlock Text="{Binding Status, Converter={StaticResource StatusToString}}"
                                                                       FontSize="11"
                                                                       FontWeight="Medium"
                                                                       Foreground="{Binding Status, Converter={StaticResource StatusToForeground}}"/>
                                                        </Border>
                                                        
                                                        <!-- Action Buttons -->
                                                        <StackPanel Grid.Column="6" 
                                                                    Orientation="Horizontal" 
                                                                    Spacing="2" 
                                                                    HorizontalAlignment="Center"
                                                                    VerticalAlignment="Center">
                                                            
                                                            <!-- Answered Button -->
                                                            <Button Classes="iconButton success"
                                                                    Width="30" Height="30"
                                                                    Command="{Binding $parent[Window].((vm:MainWindowViewModel)DataContext).SetAnsweredCommand}"
                                                                    CommandParameter="{Binding}"
                                                                    IsEnabled="{Binding IsActionsEnabled}"
                                                                    ToolTip.Tip="ÄÃ¡nh dáº¥u: Nghe mÃ¡y">
                                                                <TextBlock Text="ðŸ“ž" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                            </Button>
                                                            
                                                            <!-- No Answer Button -->
                                                            <Button Classes="iconButton neutral"
                                                                    Width="30" Height="30"
                                                                    Command="{Binding $parent[Window].((vm:MainWindowViewModel)DataContext).SetNoAnswerCommand}"
                                                                    CommandParameter="{Binding}"
                                                                    IsEnabled="{Binding IsActionsEnabled}"
                                                                    ToolTip.Tip="ÄÃ¡nh dáº¥u: KhÃ´ng nghe mÃ¡y">
                                                                <TextBlock Text="ðŸ”•" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                            </Button>
                                                            
                                                            <!-- Invalid Number Button -->
                                                            <Button Classes="iconButton error"
                                                                    Width="30" Height="30"
                                                                    Command="{Binding $parent[Window].((vm:MainWindowViewModel)DataContext).SetInvalidNumberCommand}"
                                                                    CommandParameter="{Binding}"
                                                                    IsEnabled="{Binding IsActionsEnabled}"
                                                                    ToolTip.Tip="ÄÃ¡nh dáº¥u: Sá»‘ sai">
                                                                <TextBlock Text="ðŸš«" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                            </Button>
                                                            
                                                            <!-- Busy Button -->
                                                            <Button Classes="iconButton warning"
                                                                    Width="30" Height="30"
                                                                    Command="{Binding $parent[Window].((vm:MainWindowViewModel)DataContext).SetBusyCommand}"
                                                                    CommandParameter="{Binding}"
                                                                    IsEnabled="{Binding IsActionsEnabled}"
                                                                    ToolTip.Tip="ÄÃ¡nh dáº¥u: MÃ¡y báº­n">
                                                                <TextBlock Text="â³" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                            </Button>
                                                            
                                                            <!-- Reset Button -->
                                                            <Button Classes="iconButton"
                                                                    Width="30" Height="30"
                                                                    Command="{Binding $parent[Window].((vm:MainWindowViewModel)DataContext).ResetStatusCommand}"
                                                                    CommandParameter="{Binding}"
                                                                    IsVisible="{Binding IsActionsEnabled, Converter={StaticResource InverseBool}}"
                                                                    ToolTip.Tip="Äáº·t láº¡i tráº¡ng thÃ¡i">
                                                                <TextBlock Text="â†©ï¸" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                            </Button>
                                                        </StackPanel>
                                                        
                                                        <!-- Edit Button -->
                                                        <Button Grid.Column="7"
                                                                Classes="iconButton"
                                                                Width="30" Height="30"
                                                                Command="{Binding EnterEditModeCommand}"
                                                                ToolTip.Tip="Chá»‰nh sá»­a thÃ´ng tin"
                                                                VerticalAlignment="Center"
                                                                HorizontalAlignment="Center">
                                                            <TextBlock Text="âœï¸" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                        </Button>
                                                    </Grid>
                                                </Border>
                                                
                                                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                                                <!-- EDIT MODE -->
                                                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                                                <Border x:Name="EditRowBorder"
                                                        Classes="contactRow editing"
                                                        IsVisible="{Binding IsEditing}"
                                                        Padding="16,12">
                                                    
                                                    <StackPanel Spacing="12">
                                                        <!-- Edit Fields Row -->
                                                        <Grid ColumnDefinitions="50,*,140,140,100,140,140,50" VerticalAlignment="Center">
                                                            <!-- ID (readonly) -->
                                                            <TextBlock Grid.Column="0" 
                                                                       Classes="bodySecondary" 
                                                                       Text="{Binding Id}" 
                                                                       VerticalAlignment="Center"/>
                                                            
                                                            <!-- Name Edit -->
                                                            <TextBox Grid.Column="1" 
                                                                     Classes="inlineEdit"
                                                                     Text="{Binding EditName, Mode=TwoWay}"
                                                                     Watermark="TÃªn liÃªn há»‡"
                                                                     Margin="0,0,8,0"
                                                                     VerticalAlignment="Center"/>
                                                            
                                                            <!-- Phone Edit -->
                                                            <StackPanel Grid.Column="2" Margin="0,0,8,0">
                                                                <TextBox Classes="inlineEdit phone"
                                                                         Classes.error="{Binding HasPhoneError}"
                                                                         Text="{Binding EditPhoneNumber, Mode=TwoWay}"
                                                                         Watermark="Sá»‘ Ä‘iá»‡n thoáº¡i"
                                                                         VerticalAlignment="Center"/>
                                                                <TextBlock Classes="errorText"
                                                                           Text="{Binding PhoneNumberError}"
                                                                           IsVisible="{Binding HasPhoneError}"/>
                                                            </StackPanel>
                                                            
                                                            <!-- Company Edit -->
                                                            <TextBox Grid.Column="3" 
                                                                     Classes="inlineEdit"
                                                                     Text="{Binding EditCompany, Mode=TwoWay}"
                                                                     Watermark="CÃ´ng ty"
                                                                     Margin="0,0,8,0"
                                                                     VerticalAlignment="Center"/>
                                                            
                                                            <!-- Note Toggle Button -->
                                                            <Button Grid.Column="4"
                                                                    Classes="noteButton"
                                                                    Classes.hasNote="{Binding HasNote}"
                                                                    Command="{Binding ToggleNoteCommand}"
                                                                    VerticalAlignment="Center"
                                                                    ToolTip.Tip="Má»Ÿ rá»™ng/thu gá»n ghi chÃº">
                                                                <StackPanel Orientation="Horizontal" Spacing="4">
                                                                    <TextBlock Text="ðŸ“" FontSize="12" VerticalAlignment="Center"/>
                                                                    <!-- Show "Thu gá»n" when expanded, "Má»Ÿ" when collapsed -->
                                                                    <TextBlock Text="Thu gá»n" FontSize="11" VerticalAlignment="Center"
                                                                               IsVisible="{Binding IsNoteExpanded}"/>
                                                                    <TextBlock Text="Má»Ÿ" FontSize="11" VerticalAlignment="Center"
                                                                               IsVisible="{Binding IsNoteExpanded, Converter={StaticResource InverseBool}}"/>
                                                                </StackPanel>
                                                            </Button>
                                                            
                                                            <!-- Status Badge (readonly in edit mode) -->
                                                            <Border Grid.Column="5"
                                                                    CornerRadius="9999"
                                                                    Padding="10,4"
                                                                    HorizontalAlignment="Left"
                                                                    VerticalAlignment="Center"
                                                                    Background="{Binding Status, Converter={StaticResource StatusToBackground}}"
                                                                    Opacity="0.6">
                                                                <TextBlock Text="{Binding Status, Converter={StaticResource StatusToString}}"
                                                                           FontSize="11"
                                                                           FontWeight="Medium"
                                                                           Foreground="{Binding Status, Converter={StaticResource StatusToForeground}}"/>
                                                            </Border>
                                                            
                                                            <!-- Save/Cancel Buttons -->
                                                            <StackPanel Grid.Column="6" 
                                                                        Orientation="Horizontal" 
                                                                        Spacing="6"
                                                                        HorizontalAlignment="Center"
                                                                        VerticalAlignment="Center">
                                                                <Button Classes="editActionSave"
                                                                        Command="{Binding SaveEditCommand}"
                                                                        IsEnabled="{Binding CanSave}"
                                                                        ToolTip.Tip="LÆ°u thay Ä‘á»•i">
                                                                    <StackPanel Orientation="Horizontal" Spacing="4">
                                                                        <TextBlock Text="ðŸ’¾" FontSize="11" VerticalAlignment="Center"/>
                                                                        <TextBlock Text="LÆ°u" VerticalAlignment="Center"/>
                                                                    </StackPanel>
                                                                </Button>
                                                                <Button Classes="editActionCancel"
                                                                        Command="{Binding CancelEditCommand}"
                                                                        ToolTip.Tip="Há»§y thay Ä‘á»•i (Esc)">
                                                                    <StackPanel Orientation="Horizontal" Spacing="4">
                                                                        <TextBlock Text="âŒ" FontSize="11" VerticalAlignment="Center"/>
                                                                        <TextBlock Text="Há»§y" VerticalAlignment="Center"/>
                                                                    </StackPanel>
                                                                </Button>
                                                            </StackPanel>
                                                            
                                                            <!-- Empty column for alignment -->
                                                            <Border Grid.Column="7"/>
                                                        </Grid>
                                                        
                                                        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                                                        <!-- EXPANDABLE NOTE PANEL -->
                                                        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                                                        <Border Classes="noteExpandPanel"
                                                                IsVisible="{Binding IsNoteExpanded}"
                                                                Margin="-16,0,-16,-12">
                                                            <StackPanel Spacing="8">
                                                                <TextBlock Text="ðŸ“ Ghi chÃº cuá»™c gá»i" 
                                                                           FontWeight="SemiBold" 
                                                                           FontSize="12"
                                                                           Foreground="{StaticResource TextSecondaryBrush}"/>
                                                                <TextBox Classes="noteTextArea"
                                                                         Text="{Binding EditNote, Mode=TwoWay}"
                                                                         x:Name="NoteTextBox"
                                                                         KeyDown="OnNoteKeyDown"/>
                                                                
                                                                <!-- Quick Note Options -->
                                                                <StackPanel Spacing="4">
                                                                    <TextBlock Text="âš¡ Ghi chÃº nhanh:" 
                                                                               FontSize="11" 
                                                                               Foreground="{StaticResource TextMutedBrush}"/>
                                                                    <WrapPanel>
                                                                        <Button Classes="quickNoteBtn"
                                                                                Content="ðŸ“ž KhÃ¡ch háº¹n gá»i láº¡i"
                                                                                Command="{Binding AddQuickNoteCommand}"
                                                                                CommandParameter="KhÃ¡ch háº¹n gá»i láº¡i sau"/>
                                                                        <Button Classes="quickNoteBtn"
                                                                                Content="â­ KhÃ¡ch tiá»m nÄƒng"
                                                                                Command="{Binding AddQuickNoteCommand}"
                                                                                CommandParameter="KhÃ¡ch hÃ ng tiá»m nÄƒng"/>
                                                                        <Button Classes="quickNoteBtn"
                                                                                Content="âŒ KhÃ´ng cÃ³ nhu cáº§u"
                                                                                Command="{Binding AddQuickNoteCommand}"
                                                                                CommandParameter="KhÃ´ng cÃ³ nhu cáº§u"/>
                                                                        <Button Classes="quickNoteBtn"
                                                                                Content="ðŸ“µ Sai sá»‘/KhÃ´ng liÃªn láº¡c Ä‘Æ°á»£c"
                                                                                Command="{Binding AddQuickNoteCommand}"
                                                                                CommandParameter="Sai sá»‘ / KhÃ´ng liÃªn láº¡c Ä‘Æ°á»£c"/>
                                                                        <Button Classes="quickNoteBtn"
                                                                                Content="ðŸ¤” Cáº§n tÆ° váº¥n thÃªm"
                                                                                Command="{Binding AddQuickNoteCommand}"
                                                                                CommandParameter="Cáº§n tÆ° váº¥n thÃªm"/>
                                                                        <Button Classes="quickNoteBtn"
                                                                                Content="âœ… ÄÃ£ chá»‘t Ä‘Æ¡n"
                                                                                Command="{Binding AddQuickNoteCommand}"
                                                                                CommandParameter="ÄÃ£ chá»‘t Ä‘Æ¡n"/>
                                                                    </WrapPanel>
                                                                </StackPanel>
                                                                
                                                                <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Right">
                                                                    <TextBlock x:Name="NoteHintText"
                                                                               Text="ðŸ’¡ âŒ˜+Enter (Mac) / Ctrl+Enter (Win) Ä‘á»ƒ lÆ°u, Esc Ä‘á»ƒ há»§y" 
                                                                               FontSize="11" 
                                                                               Foreground="{StaticResource TextMutedBrush}"
                                                                               VerticalAlignment="Center"/>
                                                                </StackPanel>
                                                            </StackPanel>
                                                        </Border>
                                                    </StackPanel>
                                                </Border>
                                            </StackPanel>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </TabControl.ContentTemplate>
                    </TabControl>
                </Grid>
            </Border>
        </Grid>
        
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <!-- DELETE CONFIRMATION DIALOG -->
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <Grid Grid.Row="0" Grid.RowSpan="2"
              IsVisible="{Binding ShowDeleteConfirmation}"
              ZIndex="200">
            <Border Background="{StaticResource OverlayBackgroundBrush}"/>
            <Border Background="{StaticResource CardBackgroundBrush}"
                    CornerRadius="12"
                    Padding="24"
                    MaxWidth="400"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    BoxShadow="0 25 50 -12 #40000000">
                <StackPanel Spacing="16">
                    <TextBlock Text="ðŸ—‘ï¸ XÃ¡c nháº­n xÃ³a" Classes="heading3" HorizontalAlignment="Center"/>
                    <TextBlock Classes="bodySecondary" TextAlignment="Center" TextWrapping="Wrap">
                        <Run Text="Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a phiÃªn nÃ y khÃ´ng?"/>
                        <LineBreak/>
                        <Run Text="HÃ nh Ä‘á»™ng nÃ y khÃ´ng thá»ƒ hoÃ n tÃ¡c." FontWeight="SemiBold"/>
                    </TextBlock>
                    <StackPanel Orientation="Horizontal" Spacing="12" HorizontalAlignment="Center" Margin="0,8,0,0">
                        <Button Classes="secondary" 
                                Content="Há»§y" 
                                Command="{Binding CancelDeleteSessionCommand}"
                                Padding="20,8"/>
                        <Button Classes="primary error" 
                                Content="XÃ³a phiÃªn" 
                                Command="{Binding ConfirmDeleteSessionCommand}"
                                Padding="20,8"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </Grid>
        
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <!-- ONBOARDING OVERLAY -->
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <Grid Grid.Row="0" Grid.RowSpan="2" 
              IsVisible="{Binding ShowOnboarding}"
              Classes="overlayFadeIn"
              ZIndex="150">
            
            <!-- Dark Overlay -->
            <Border Background="{StaticResource OverlayBackgroundBrush}"/>
            
            <!-- Onboarding Content -->
            <Border Classes="scaleIn"
                    Background="{StaticResource CardBackgroundBrush}"
                    CornerRadius="16"
                    Padding="32"
                    MaxWidth="480"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    BoxShadow="0 25 50 -12 #40000000">
                
                <StackPanel Spacing="24">
                    
                    <!-- Step Indicator -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="8">
                        <!-- Dot 1: Active when step >= 1 -->
                        <Border Width="32" Height="4" CornerRadius="2"
                                Background="{Binding CurrentOnboardingStep, Converter={StaticResource StepIndicatorBrush}, ConverterParameter=1}"/>
                        
                        <!-- Dot 2: Active when step >= 2 -->
                        <Border Width="32" Height="4" CornerRadius="2"
                                Background="{Binding CurrentOnboardingStep, Converter={StaticResource StepIndicatorBrush}, ConverterParameter=2}"/>
                        
                        <!-- Dot 3: Active when step >= 3 -->
                        <Border Width="32" Height="4" CornerRadius="2"
                                Background="{Binding CurrentOnboardingStep, Converter={StaticResource StepIndicatorBrush}, ConverterParameter=3}"/>
                    </StackPanel>
                    
                    <!-- Step 1 Content -->
                    <StackPanel Spacing="16" IsVisible="{Binding CurrentOnboardingStep, Converter={StaticResource StepToVisibility}, ConverterParameter=1}">
                        <Border Width="64" Height="64" CornerRadius="32" Background="{StaticResource PrimaryLightBrush}" HorizontalAlignment="Center">
                            <TextBlock Text="ðŸ“¥" FontSize="28" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <TextBlock Classes="heading2" Text="{Binding OnboardingStep1Title}" HorizontalAlignment="Center"/>
                        <TextBlock Classes="bodySecondary" Text="{Binding OnboardingStep1Description}" TextAlignment="Center" TextWrapping="Wrap"/>
                    </StackPanel>
                    
                    <!-- Step 2 Content -->
                    <StackPanel Spacing="16" IsVisible="{Binding CurrentOnboardingStep, Converter={StaticResource StepToVisibility}, ConverterParameter=2}">
                        <Border Width="64" Height="64" CornerRadius="32" Background="{StaticResource SuccessLightBrush}" HorizontalAlignment="Center">
                            <TextBlock Text="ðŸ“ž" FontSize="28" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <TextBlock Classes="heading2" Text="{Binding OnboardingStep2Title}" HorizontalAlignment="Center"/>
                        <TextBlock Classes="bodySecondary" Text="{Binding OnboardingStep2Description}" TextAlignment="Center" TextWrapping="Wrap"/>
                        
                        <!-- Action buttons preview -->
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="12" Margin="0,8,0,0">
                            <StackPanel Spacing="4" HorizontalAlignment="Center">
                                <Border Width="36" Height="36" CornerRadius="18" Background="{StaticResource SuccessLightBrush}" HorizontalAlignment="Center">
                                    <TextBlock Text="ðŸ“ž" FontSize="16" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                                <TextBlock Classes="caption" Text="Nghe mÃ¡y" HorizontalAlignment="Center"/>
                            </StackPanel>
                            <StackPanel Spacing="4" HorizontalAlignment="Center">
                                <Border Width="36" Height="36" CornerRadius="18" Background="{StaticResource NeutralLightBrush}" HorizontalAlignment="Center">
                                    <TextBlock Text="ðŸ”•" FontSize="16" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                                <TextBlock Classes="caption" Text="KhÃ´ng nghe" HorizontalAlignment="Center"/>
                            </StackPanel>
                            <StackPanel Spacing="4" HorizontalAlignment="Center">
                                <Border Width="36" Height="36" CornerRadius="18" Background="{StaticResource ErrorLightBrush}" HorizontalAlignment="Center">
                                    <TextBlock Text="ðŸš«" FontSize="16" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                                <TextBlock Classes="caption" Text="Sá»‘ sai" HorizontalAlignment="Center"/>
                            </StackPanel>
                            <StackPanel Spacing="4" HorizontalAlignment="Center">
                                <Border Width="36" Height="36" CornerRadius="18" Background="{StaticResource WarningLightBrush}" HorizontalAlignment="Center">
                                    <TextBlock Text="â³" FontSize="16" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                                <TextBlock Classes="caption" Text="MÃ¡y báº­n" HorizontalAlignment="Center"/>
                            </StackPanel>
                        </StackPanel>
                    </StackPanel>
                    
                    <!-- Step 3 Content -->
                    <StackPanel Spacing="16" IsVisible="{Binding CurrentOnboardingStep, Converter={StaticResource StepToVisibility}, ConverterParameter=3}">
                        <Border Width="64" Height="64" CornerRadius="32" Background="{StaticResource WarningLightBrush}" HorizontalAlignment="Center">
                            <TextBlock Text="ðŸ“¤" FontSize="28" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <TextBlock Classes="heading2" Text="{Binding OnboardingStep3Title}" HorizontalAlignment="Center"/>
                        <TextBlock Classes="bodySecondary" Text="{Binding OnboardingStep3Description}" TextAlignment="Center" TextWrapping="Wrap"/>
                    </StackPanel>
                    
                    <!-- Navigation Buttons -->
                    <Grid ColumnDefinitions="*,Auto,*">
                        <!-- Skip / Don't show again -->
                        <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="8">
                            <Button Classes="secondary" 
                                    Content="Bá» qua" 
                                    Command="{Binding SkipOnboardingCommand}"
                                    Padding="12,8"/>
                        </StackPanel>
                        
                        <!-- Next / Finish Button -->
                        <Button Grid.Column="2" 
                                Classes="primary" 
                                HorizontalAlignment="Right"
                                Command="{Binding NextOnboardingStepCommand}">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <TextBlock Text="Tiáº¿p tá»¥c" VerticalAlignment="Center"/>
                                <TextBlock Text="â†’" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                    </Grid>
                    
                    <!-- Don't show again checkbox -->
                    <Button Classes="secondary" 
                            Content="KhÃ´ng hiá»ƒn thá»‹ láº¡i" 
                            Command="{Binding DontShowAgainCommand}"
                            HorizontalAlignment="Center"
                            Padding="12,6"
                            FontSize="12"
                            Foreground="{StaticResource TextMutedBrush}"/>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Window>
